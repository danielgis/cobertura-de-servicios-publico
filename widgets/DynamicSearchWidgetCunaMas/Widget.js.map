{"version":3,"sources":["../../../widgets/DynamicSearchWidgetCunaMas/Widget.js"],"names":["declare","BaseWidget","_WidgetsInTemplateMixin","WidgetManager","QueryTask","Query","Deferred","all","BusyIndicator","jquery","select2","fontAwesome","document","createElement","src","head","appendChild","select2Css","rel","href","isFirstLoad","baseClass","groupSelected","urlLayerSelected","whereDefault","postCreate","inherited","arguments","map","on","executeZoomExtentInitial","bind","onClickGroup","evt","indexGroupSelected","Array","from","target","parentNode","children","indexOf","config","groups","find","group","index","buildFormRadioCs","buildFormSearchCs","buildHeaderSearchCs","containerGroupsApCs","classList","toggle","containerFiltersApCs","onClickBack","destroyFormSearchCs","startup","busyIndicator","create","domNode","backgroundOpacity","onOpen","buildMainMenuCs","dojo","query","homeWidget","getInstance","getWidgetsByName","setExtent","homeDijit","extent","sort","a","b","containerGridApCs","innerHTML","length","containerBackApCs","remove","forEach","img","logo","alt","name","add","setAttribute","label","style","color","description","containerImgSelectedApCs","layersForm","makeSelectorLayers","layers","visible","radioContainerApCs","filters","containerBodyApCs","filter","select","id","codeField","startupData","urlFilter","url","fieldsFilter","nameField","getDataByFilter","then","makeOptionCs","response","features","firstOption","catch","console","error","err","$","event","onChangeFilterCs","tags","placeholder","fields","where","distinctValues","deferred","queryTask","outFields","returnGeometry","returnDistinctValues","execute","resolve","reject","promise","setExtentByFilter","self","executeForExtent","expand","destroyFormRadioCs","options","selectControl","valueField","labelField","fixOptionSelected","selectedValue","selectedIndex","value","phOption","text","restoreOption","selected","optionElement","option","attributes","toString","currentFilterIndex","show","manageWhere","currentFilter","currentTarget","dispatchEvent","Event","responseFilter","isZoom","geometry","type","centerAndZoom","promises","data","getElementById","hide","formRadioContainersApCs","idSelected","radioItemContainer","input","layer","for","display","handleRadioButtonClick","checked","click","layerSelected","layersId","getLayer","layerId","setVisibility","push","join"],"mappings":"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","file":"Widget.js","sourcesContent":["import declare from 'dojo/_base/declare';\r\nimport BaseWidget from 'jimu/BaseWidget';\r\nimport _WidgetsInTemplateMixin from 'dijit/_WidgetsInTemplateMixin';\r\nimport WidgetManager from \"jimu/WidgetManager\"\r\nimport QueryTask from \"esri/tasks/QueryTask\";\r\nimport Query from \"esri/tasks/query\";\r\nimport Deferred from \"dojo/Deferred\";\r\nimport all from \"dojo/promise/all\";\r\nimport BusyIndicator from 'esri/dijit/util/busyIndicator';\r\nimport jquery from 'https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js';\r\nimport select2 from 'https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js';\r\n// import StatisticDefinition from \"esri/tasks/StatisticDefinition\"\r\n\r\nconst fontAwesome = document.createElement('script');\r\nfontAwesome.src = 'https://use.fontawesome.com/releases/v5.3.1/js/all.js';\r\ndocument.head.appendChild(fontAwesome);\r\n\r\n// add link an script\r\n// <link href=\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css\" rel=\"stylesheet\"/>\r\n// <script src=\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js\"></script>\r\n\r\nconst select2Css = document.createElement('link');\r\nselect2Css.rel = 'stylesheet';\r\nselect2Css.href = 'https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css';\r\ndocument.head.appendChild(select2Css);\r\n\r\n// const select2Js = document.createElement('script');\r\n// select2Js.src = 'https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js';\r\n// document.head.appendChild(select2Js);\r\n\r\nlet isFirstLoad = false;\r\n\r\n// To create a widget, you need to derive from BaseWidget.\r\nexport default declare([BaseWidget], {\r\n\r\n  // Custom widget code goes here\r\n\r\n  baseClass: 'dynamic-search-widget-cuna-mas',\r\n  groupSelected: null,\r\n  urlLayerSelected: null,\r\n  whereDefault: '1=1',\r\n\r\n  // add additional properties here\r\n\r\n  // methods to communication with app container:\r\n  postCreate() {\r\n    this.inherited(arguments);\r\n    this.map.on(\"update-end\", this.executeZoomExtentInitial.bind(this));\r\n  },\r\n\r\n  onClickGroup(evt) {\r\n    const indexGroupSelected = Array.from(evt.target.parentNode.children).indexOf(evt.target);\r\n    this.groupSelected = this.config.groups.find(group => group.index === indexGroupSelected);\r\n    this.buildFormRadioCs();\r\n    this.buildFormSearchCs();\r\n    this.buildHeaderSearchCs();\r\n    this.containerGroupsApCs.classList.toggle('active');\r\n    this.containerFiltersApCs.classList.toggle('active');\r\n  },\r\n\r\n  onClickBack(evt) {\r\n    this.containerGroupsApCs.classList.toggle('active');\r\n    this.containerFiltersApCs.classList.toggle('active');\r\n    this.destroyFormSearchCs();\r\n    this.urlLayerSelected = null;\r\n  },\r\n\r\n  startup() {\r\n    this.inherited(arguments);\r\n    this.busyIndicator = BusyIndicator.create({\r\n      target: this.domNode.parentNode.parentNode,\r\n      backgroundOpacity: 0\r\n    });\r\n  },\r\n  onOpen() {\r\n    this.buildMainMenuCs();\r\n    dojo.query(\".groupFilterClsCs\").on('click', this.onClickGroup.bind(this));\r\n    dojo.query(\".backButtonClsCs\").on('click', this.onClickBack.bind(this));\r\n  },\r\n\r\n  executeZoomExtentInitial() {\r\n    if (isFirstLoad) {\r\n      return;\r\n    }\r\n    const homeWidget = WidgetManager.getInstance().getWidgetsByName(\"HomeButton\");\r\n    this.map.setExtent(homeWidget[0].homeDijit.extent);\r\n    isFirstLoad = true;\r\n  },\r\n\r\n  buildMainMenuCs() {\r\n    this.config.groups.sort((a, b) => a.index - b.index);\r\n    this.containerGridApCs.innerHTML = '';\r\n    if (this.config.groups.length == 1) {\r\n      this.groupSelected = this.config.groups[0];\r\n      this.containerBackApCs.classList.remove('active');\r\n      this.buildFormRadioCs();\r\n      this.buildFormSearchCs();\r\n      this.buildHeaderSearchCs();\r\n      this.containerGroupsApCs.classList.toggle('active');\r\n      this.containerFiltersApCs.classList.toggle('active');\r\n      return;\r\n    }\r\n    this.config.groups.forEach(group => {\r\n      const img = document.createElement('img');\r\n      img.src = group.logo;\r\n      img.alt = group.name;\r\n      img.classList.add('groupFilterClsCs', 'groupCs');\r\n      img.setAttribute('data-dojo-attach-point', 'scdApCs');\r\n      this.containerGridApCs.appendChild(img);\r\n    });\r\n  },\r\n\r\n  buildHeaderSearchCs() {\r\n    dojo.query('#nameSelectedCs')[0].innerHTML = this.groupSelected.label;\r\n    dojo.query('#nameSelectedCs')[0].style.color = this.groupSelected.color;\r\n    dojo.query('#descSelectedCs')[0].innerHTML = this.groupSelected.description;\r\n    dojo.query('#descSelectedCs')[0].style.color = this.groupSelected.color;\r\n    const img = document.createElement('img');\r\n    img.src = this.groupSelected.logo;\r\n    img.alt = this.groupSelected.name;\r\n    img.classList.add('groupFilterClsCs', 'groupCs');\r\n    img.setAttribute('data-dojo-attach-point', 'scdApCs');\r\n    this.containerImgSelectedApCs.innerHTML = '';\r\n    this.containerImgSelectedApCs.appendChild(img);\r\n  },\r\n\r\n  buildFormRadioCs() {\r\n    if (this.groupSelected.layersForm) {\r\n      this.makeSelectorLayers(this.groupSelected.layersForm.layers);\r\n      if (this.groupSelected.layersForm.visible) {\r\n        this.radioContainerApCs.classList.add('active');\r\n      } else {\r\n        this.radioContainerApCs.classList.remove('active');\r\n      }\r\n    } else {\r\n      this.radioContainerApCs.classList.remove('active');\r\n    }\r\n  },\r\n\r\n  buildFormSearchCs() {\r\n    const filters = this.groupSelected.filters;\r\n    filters.sort((a, b) => a.index - b.index);\r\n    this.containerBodyApCs.innerHTML = '';\r\n    filters.forEach((filter, index) => {\r\n      const label = document.createElement('p');\r\n      label.classList.add('labelComboBoxClsCs');\r\n      label.innerHTML = filter.label;\r\n      this.containerBodyApCs.appendChild(label);\r\n\r\n      const select = document.createElement('select');\r\n      select.classList.add('comboBoxClsCs');\r\n      select.classList.add('form-control');\r\n      select.classList.add('js-example-tags');\r\n      // select.classList.add('select2');\r\n      select.id = filter.codeField;\r\n      if (filter.startupData) {\r\n        const urlFilter = this.urlLayerSelected || filter.url;\r\n        const fieldsFilter = [filter.codeField, filter.nameField];\r\n        this.getDataByFilter(urlFilter, fieldsFilter)\r\n          .then(response => {\r\n            this.makeOptionCs(response.features, select, filter.codeField, filter.nameField, filter.firstOption);\r\n          })\r\n          .catch(err => {\r\n            console.error('err', err);\r\n          });\r\n\r\n      };\r\n      // select.select2({\r\n      //   tags: true,\r\n      //   onchange: this.onChangeFilterCs.bind(this)\r\n      // })\r\n      // select.addEventListener('change.select2', (event) => this.onChangeFilterCs(event, index));\r\n      // the same code as js vanilla with jquery\r\n      this.containerBodyApCs.appendChild(select);\r\n      $(`#${filter.codeField}`).on('select2:select', (event) => this.onChangeFilterCs(event, index));\r\n      $(`#${filter.codeField}`).select2({\r\n        tags: true,\r\n        placeholder: filter.firstOption,\r\n        // allowClear: true\r\n      });\r\n\r\n    });\r\n\r\n  },\r\n\r\n  getDataByFilter(url, fields, where = this.whereDefault, distinctValues = true) {\r\n    const deferred = new Deferred();\r\n    const queryTask = new QueryTask(url);\r\n    const query = new Query();\r\n    query.outFields = fields;\r\n    query.where = where;\r\n\r\n    query.returnGeometry = distinctValues ? false : true;\r\n    query.returnDistinctValues = distinctValues;\r\n\r\n    queryTask.execute(query)\r\n      .then(response => {\r\n        deferred.resolve(response);\r\n      })\r\n      .catch(err => {\r\n        deferred.reject(err);\r\n      });\r\n    return deferred.promise;\r\n  },\r\n\r\n  setExtentByFilter(url, where) {\r\n    const self = this;\r\n    const deferred = new Deferred();\r\n    const queryTask = new QueryTask(url);\r\n    const query = new Query();\r\n    query.where = where;\r\n    query.returnGeometry = true;\r\n\r\n    queryTask.executeForExtent(query)\r\n      .then(response => {\r\n        self.map.setExtent(response.extent.expand(1.1), true);\r\n        deferred.resolve(response);\r\n      })\r\n      .catch(err => {\r\n        console.error('err', err);\r\n        deferred.reject(err);\r\n      });\r\n    return deferred.promise;\r\n  },\r\n\r\n  destroyFormSearchCs() {\r\n    this.containerBodyApCs.innerHTML = '';\r\n  },\r\n\r\n  destroyFormRadioCs() {\r\n    this.radioContainerApCs.innerHTML = '';\r\n  },\r\n\r\n  makeOptionCs(options, selectControl, valueField, labelField, firstOption, fixOptionSelected = true) {\r\n    let selectedValue = null;\r\n    if (fixOptionSelected) {\r\n      const selectedIndex = selectControl.selectedIndex;\r\n      if (selectedIndex > 1) {\r\n        selectedValue = selectControl.options[selectedIndex].value;\r\n      }\r\n    }\r\n    selectControl.innerHTML = '';\r\n    const phOption = document.createElement('option');\r\n    phOption.text = firstOption;\r\n    phOption.value = '';\r\n    selectControl.appendChild(phOption);\r\n\r\n    const restoreOption = document.createElement('option');\r\n    // restoreOption.text = firstOption;\r\n    restoreOption.text = 'Vacío';\r\n    restoreOption.value = '0';\r\n    restoreOption.selected = false;\r\n    // restoreOption.disabled = true;\r\n    selectControl.appendChild(restoreOption);\r\n\r\n    options.forEach(option => {\r\n      const optionElement = document.createElement('option');\r\n      optionElement.value = option.attributes[valueField];\r\n      optionElement.innerHTML = option.attributes[labelField];\r\n      if (selectedValue && selectedValue.toString() === option.attributes[valueField].toString()) {\r\n        optionElement.selected = true;\r\n      }\r\n      selectControl.appendChild(optionElement);\r\n    });\r\n  },\r\n\r\n  onChangeFilterCs(evt, currentFilterIndex) {\r\n    this.busyIndicator.show();\r\n    let where = this.manageWhere();\r\n    if (where === '') {\r\n      where = this.whereDefault;\r\n    }\r\n    const selectedIndex = evt.target.selectedIndex;\r\n    const selectedValue = evt.target.options[selectedIndex].value;\r\n    const currentFilter = this.groupSelected.filters[currentFilterIndex];\r\n\r\n    if (selectedValue === '0') {\r\n      // si se selecionar \"vacio\" con un value igual a 0; el select no debe tener ningun valor seleccionado\r\n      evt.currentTarget.value = '';\r\n      // evt.currentTarget.options[0].selected = true;\r\n      evt.currentTarget.dispatchEvent(new Event('change'));\r\n    };\r\n\r\n    const fields = [currentFilter.codeField, currentFilter.nameField];\r\n    // const where = `${currentFilter.codeField} = '${selectedValue}'`;\r\n\r\n    let responseFilter;\r\n\r\n    const url = this.urlLayerSelected || currentFilter.url;\r\n    return this.getDataByFilter(url, fields, where, false)\r\n      .then((response) => {\r\n        responseFilter = response;\r\n        if (!currentFilter.isZoom) {\r\n          return null;\r\n        }\r\n        if (responseFilter.features.length === 1 && responseFilter.features[0].geometry.type === 'point') {\r\n          return this.map.centerAndZoom(responseFilter.features[0].geometry, 17);\r\n        }\r\n        return this.setExtentByFilter(url, where);\r\n      })\r\n      .then(() => {\r\n        const promises = this.groupSelected.filters.map((filter, index) => {\r\n          if (selectedValue === '0') {\r\n            const urlFilter = this.urlLayerSelected || filter.url;\r\n            const fieldsFilter = [filter.codeField, filter.nameField];\r\n            return this.getDataByFilter(urlFilter, fieldsFilter, where)\r\n              .then(data => {\r\n                this.makeOptionCs(data.features, document.getElementById(filter.codeField), filter.codeField, filter.nameField, filter.firstOption);\r\n              });\r\n          }\r\n          else if (evt.target.id !== filter.codeField) {\r\n            const urlFilter = this.urlLayerSelected || filter.url;\r\n            const fieldsFilter = [filter.codeField, filter.nameField];\r\n            return this.getDataByFilter(urlFilter, fieldsFilter, where)\r\n              .then(data => {\r\n                this.makeOptionCs(data.features, document.getElementById(filter.codeField), filter.codeField, filter.nameField, filter.firstOption);\r\n              });\r\n          }\r\n        });\r\n        return all(promises);\r\n        // this.groupSelected.filters.forEach(filter => {\r\n        // makeOption by each filter\r\n\r\n        // });\r\n        //   if (!currentFilter.filterAffected) {\r\n        //     return;\r\n        //   }\r\n        //   currentFilter.filterAffected.forEach(affectedIndex => {\r\n        //     const affectedFilter = this.groupSelected.filters[affectedIndex];\r\n        //     const affectedSelect = document.getElementById(affectedFilter.codeField);\r\n        //     const urlFilter = this.urlLayerSelected || affectedFilter.url;\r\n        //     const fieldsFilter = [affectedFilter.codeField, affectedFilter.nameField];\r\n        //     const whereFilter = `${currentFilter.codeField} = '${selectedValue}'`;\r\n        //     this.getDataByFilter(urlFilter, fieldsFilter, whereFilter)\r\n        //       .then(data => {\r\n        //         this.makeOptionCs(data.features, affectedSelect, affectedFilter.codeField, affectedFilter.nameField, affectedFilter.firstOption);\r\n        //       })\r\n        //       .then(() => {\r\n        //         let filterAffectedReset = affectedFilter.filterAffected;\r\n        //         while (filterAffectedReset.length > 0) {\r\n        //           filterAffectedReset = this.resetSelectIndexArray(filterAffectedReset);\r\n        //         }\r\n        //       })\r\n        //       .catch(err => {\r\n        //         console.error(`Error al actualizar el filtro ${affectedFilter.label}:`, err);\r\n        //       });\r\n        //   });\r\n      })\r\n      .then(() => {\r\n        this.busyIndicator.hide();\r\n      })\r\n      .catch(err => {\r\n        console.error('err', err);\r\n        this.busyIndicator.hide();\r\n      });\r\n  },\r\n\r\n  // resetSelectIndexArray(indexArray) {\r\n  //   const newAffectedFilters = [];\r\n  //   this.groupSelected.filters.forEach(filter => {\r\n  //     indexArray.forEach(index => {\r\n  //       if (filter.index === index) {\r\n  //         const select = document.getElementById(filter.codeField);\r\n  //         select.innerHTML = '';\r\n  //         const phOption = document.createElement('option');\r\n  //         phOption.text = filter.firstOption;\r\n  //         phOption.value = '';\r\n  //         select.appendChild(phOption);\r\n  //         const restoreOption = document.createElement('option');\r\n  //         // restoreOption.text = filter.firstOption;\r\n  //         restoreOption.text = 'Vacío';\r\n  //         restoreOption.value = '0';\r\n  //         restoreOption.selected = false;\r\n  //         // restoreOption.disabled = false;\r\n  //         select.appendChild(restoreOption);\r\n  //         newAffectedFilters.push(filter.filterAffected);\r\n  //       }\r\n  //     });\r\n  //   });\r\n\r\n  //   return newAffectedFilters.flat();\r\n  // },\r\n\r\n  makeSelectorLayers(layers) {\r\n    layers.sort((a, b) => a.index - b.index);\r\n    this.formRadioContainersApCs.innerHTML = '';\r\n\r\n    let idSelected;\r\n\r\n    layers.forEach(layer => {\r\n\r\n      const radioItemContainer = document.createElement('div');\r\n      radioItemContainer.classList.add('radioItemContainerCs');\r\n      const input = document.createElement('input');\r\n      input.type = 'radio';\r\n      input.name = 'searchType';\r\n      input.id = layer.id;\r\n      if (layer.selected) {\r\n        idSelected = layer.id;\r\n      };\r\n      radioItemContainer.appendChild(input);\r\n      const label = document.createElement('label');\r\n      label.for = layer.id;\r\n      label.innerHTML = layer.label;\r\n      radioItemContainer.appendChild(label);\r\n      if (!layer.visible) {\r\n        // display none\r\n        radioItemContainer.style.display = 'none';\r\n      }\r\n      this.formRadioContainersApCs.appendChild(radioItemContainer);\r\n    });\r\n    dojo.query('.radioItemContainerCs input').on('click', this.handleRadioButtonClick.bind(this));\r\n    // execute event ckecked the radio button selected by id programmatically in dom\r\n    if (idSelected) {\r\n      document.getElementById(idSelected).checked = true;\r\n      document.getElementById(idSelected).click();\r\n    };\r\n  },\r\n\r\n  handleRadioButtonClick(event) {\r\n    const layerSelected = this.groupSelected.layersForm.layers.find(layer => layer.id === event.target.id);\r\n    if (layerSelected) {\r\n      this.groupSelected.layersForm.layers.forEach(layer => {\r\n        if (layer.id === event.target.id) {\r\n        } else {\r\n          layer.layersId.forEach(layerId => {\r\n            if (this.map.getLayer(layerId).visible & layerSelected.layersId[0] != layerId) {\r\n              this.map.getLayer(layerId).setVisibility(false)\r\n            };\r\n          });\r\n        }\r\n      });\r\n      layerSelected.layersId.forEach(layerId => {\r\n        if (!this.map.getLayer(layerId).visible) {\r\n          this.map.getLayer(layerId).setVisibility(true);\r\n        };\r\n      });\r\n      this.urlLayerSelected = this.map.getLayer(layerSelected.layersId[0]).url;\r\n    }\r\n  },\r\n\r\n  manageWhere() {\r\n    let where = [];\r\n    this.groupSelected.filters.forEach(filter => {\r\n      const select = document.getElementById(filter.codeField);\r\n      // get value selected\r\n      const selectedIndex = select.selectedIndex;\r\n      if (selectedIndex > 1) {\r\n        // create where\r\n        const selectedValue = select.options[selectedIndex].value;\r\n        where.push(`(${filter.codeField} = '${selectedValue}')`);\r\n      };\r\n    });\r\n    // console.log('where', where.join(' AND '));\r\n    return where.join(' AND ');\r\n  },\r\n\r\n\r\n\r\n  // onClose(){\r\n  //   console.log('DynamicSearchWidgetCunaMas::onClose');\r\n  // },\r\n  // onMinimize(){\r\n  //   console.log('DynamicSearchWidgetCunaMas::onMinimize');\r\n  // },\r\n  // onMaximize(){\r\n  //   console.log('DynamicSearchWidgetCunaMas::onMaximize');\r\n  // },\r\n  // onSignIn(credential){\r\n  //   console.log('DynamicSearchWidgetCunaMas::onSignIn', credential);\r\n  // },\r\n  // onSignOut(){\r\n  //   console.log('DynamicSearchWidgetCunaMas::onSignOut');\r\n  // }\r\n  // onPositionChange(){\r\n  //   console.log('DynamicSearchWidgetCunaMas::onPositionChange');\r\n  // },\r\n  // resize(){\r\n  //   console.log('DynamicSearchWidgetCunaMas::resize');\r\n  // }\r\n});\r\n"]}